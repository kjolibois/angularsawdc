<div id="search-component">
    <h4><label for="search-box">Resume Search</label></h4>
   
    <input #searchBox id="search-box" (input)="search(searchBox.value)" />
  <button (click)="getResume(searchBox.value)" >search</button>


  <div class="comeBack_up" *ngIf="(resumes$.length ==  0)">

    no resume found
  </div>
    <div class="search-result">
    <div *ngFor="let currentSubmission of resumes$; let first=first;" >
      <mat-accordion>
        <mat-expansion-panel *ngIf="first">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Job Log
            </mat-panel-title>
            <mat-panel-description>
              Most Recent 
            </mat-panel-description>
          </mat-expansion-panel-header>
           <button (click)="toggleNewJobs()"> Add new Job</button>
           <div *ngIf="newJobs==true">
            <mat-card >
              <mat-card-header class="card-container">
                <mat-card-title class="card-container-left" >New Job</mat-card-title>
                <mat-card-title class="card-container-right"><button mat-button  (click)="toggleNewJobs()">
                  <mat-icon> remove</mat-icon>
                  
              </button>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <mat-form-field>
                  <input matInput  placeholder="Job Title" >
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="City" >
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="State" >
                </mat-form-field>
                <mat-form-field>
                  <input matInput [matDatepicker]="startdate" placeholder="Start Date">
                  <mat-datepicker-toggle matSuffix [for]="startdate"></mat-datepicker-toggle>
                  <mat-datepicker touchUi="true" #startdate></mat-datepicker>
                </mat-form-field>
                <mat-form-field>
                  <input matInput [matDatepicker]="enddate" placeholder="End Date">
                  <mat-datepicker-toggle matSuffix [for]="enddate"></mat-datepicker-toggle>
                  <mat-datepicker touchUi="true" #enddate></mat-datepicker>
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="End Date" >
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="Notes" >
                </mat-form-field>
                 <button> Save New Info</button>   
                 <button (click)="toggleNewJobs()">Cancel</button>   

              </mat-card-content>
            </mat-card>

           </div>
          <div  *ngFor="let job of currentSubmission.job_log">
            <div *ngIf="editJobs==true">
            <mat-card >
              <mat-card-header class="card-container">
                <mat-card-title class="card-container-left" >Job # {{job.jobnumber}}</mat-card-title>
                <mat-card-title class="card-container-right"><button mat-button (click)="toggleEdit()">
                  <mat-icon (click)="toggleEdit()">remove</mat-icon>
                  
              </button>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <mat-form-field>
                  <input matInput  placeholder="Job Title" value="{{job.jobtitle}}">
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="City" value="{{job.city}}">
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="State" value="{{job.state}}">
                </mat-form-field>
                <mat-form-field>
                  <input matInput [matDatepicker]="startdate" placeholder="Start Date">
                  <mat-datepicker-toggle matSuffix [for]="startdate"></mat-datepicker-toggle>
                  <mat-datepicker touchUi="true" #startdate></mat-datepicker>
                </mat-form-field>
                <mat-form-field>
                  <input matInput [matDatepicker]="enddate" placeholder="End Date">
                  <mat-datepicker-toggle matSuffix [for]="enddate"></mat-datepicker-toggle>
                  <mat-datepicker touchUi="true" #enddate></mat-datepicker>
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="End Date" value="{{job.enddate}}">
                </mat-form-field>
                <mat-form-field>
                  <input matInput  placeholder="Notes" value="{{job.notes}}">
                </mat-form-field>
                 <button> Save New Info</button>   
                 <button (click)="toggleEdit()">Cancel</button>   

              </mat-card-content>
            </mat-card>
            </div>
            <div  *ngIf="editJobs== false">
            <mat-card >
              <mat-card-header class="card-container">
                <mat-card-title class="card-container-left" >Job # {{job.jobnumber}}</mat-card-title>
                <mat-card-title class="card-container-right"><button mat-button (click)="toggleEdit()">
                  <mat-icon  (click)="toggleEdit()"  >edit</mat-icon>
                  
              </button>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
               
                  <mat-list>
                    <form>
                    <mat-list-item> Job Title: {{job.jobtitle}}</mat-list-item>
                    <mat-list-item> City: {{job.city}} </mat-list-item>
                    <mat-list-item> State: {{job.state}} </mat-list-item>
                    <mat-list-item> Start Date: {{job.startdate}} </mat-list-item>
                    <mat-list-item> End Date:  {{job.enddate}} </mat-list-item>
                    <mat-list-item> Notes {{job.notes}}</mat-list-item>
                  </form>
                   </mat-list>             
         
              </mat-card-content>
            </mat-card>
          </div>
             <br/>
  
             <br/>
            
              </div>
















          
        </mat-expansion-panel>
        <mat-expansion-panel *ngIf="!first" (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Older One
            </mat-panel-title>
            <mat-panel-description>
              Currently I am {{panelOpenState ? 'open' : 'closed'}}
            </mat-panel-description>
          </mat-expansion-panel-header>
           <p>{{currentSubmission.email}}</p>
          <p>Thinking about showing old ones but view only but probably just show one</p>
        </mat-expansion-panel>
      </mat-accordion>
      
      
      
      
      
      
      
      
    </div>
     
     
  
  </div>
